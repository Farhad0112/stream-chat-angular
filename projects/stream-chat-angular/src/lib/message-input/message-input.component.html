<div
  class="str-chat__input-flat"
  [class.str-chat__input-flat-has-attachments]="
    (attachmentUploads$ | async)!.length > 0
  "
>
  <div class="str-chat__input-flat-wrapper">
    <div class="str-chat__input-flat--textarea-wrapper">
      <stream-attachment-preview-list
        class="rfu-image-previewer-angular-host"
      ></stream-attachment-preview-list>
      <div class="rta str-chat__textarea">
        <ng-template
          streamTextarea
          [(value)]="textareaValue"
          (send)="messageSent()"
          [componentRef]="textareaRef"
        ></ng-template>
      </div>
      <div
        *ngIf="isFileUploadEnabled && isFileUploadAuthorized"
        class="str-chat__fileupload-wrapper"
        data-testid="file-upload-button"
      >
        <div class="str-chat__tooltip">
          {{ "streamChat.Attach files" | translate }}
        </div>
        <div class="rfu-file-upload-button">
          <label>
            <input
              #fileInput
              type="file"
              class="rfu-file-input"
              data-testid="file-input"
              [accept]="accept"
              [multiple]="isMultipleFileUploadEnabled"
              (change)="filesSelected(fileInput.files)"
            />
            <span class="str-chat__input-flat-fileupload">
              <stream-icon icon="file-upload"></stream-icon>
            </span>
          </label>
        </div>
      </div>
    </div>
    <button
      data-testid="send-button"
      class="str-chat__send-button"
      (click)="messageSent()"
      (keyup.enter)="messageSent()"
    >
      <stream-icon icon="send"></stream-icon>
    </button>
  </div>
</div>
